

=== ./dm_requerimientos/admin.py ===
from django.contrib import admin

# Register your models here.


=== ./dm_requerimientos/__init__.py ===


=== ./dm_requerimientos/migrations/__init__.py ===


=== ./dm_requerimientos/views.py ===
from django.shortcuts import render

# Create your views here.


=== ./dm_requerimientos/models.py ===
# This is an auto-generated Django model module.
# You'll have to do the following manually to clean this up:
#   * Rearrange models' order
#   * Make sure each model has one field with primary_key=True
#   * Make sure each ForeignKey and OneToOneField has `on_delete` set to the desired behavior
#   * Remove `managed = False` lines if you wish to allow Django to create, modify, and delete the table
# Feel free to rename the models, but don't rename db_table values or field names.
from django.db import models


class Documento(models.Model):
    id_empresa = models.IntegerField()
    id_requerimiento = models.ForeignKey('Requerimientos', models.DO_NOTHING, db_column='id_requerimiento')
    nombre = models.CharField(max_length=60)
    path = models.CharField(max_length=100)
    fecha = models.DateTimeField()

    class Meta:
        managed = False
        db_table = '"dm_requerimientos"."documento"'


class Requerimientos(models.Model):
    id_empresa = models.IntegerField()
    id_requerimientos_elementos = models.ForeignKey('RequerimientosElementos', models.DO_NOTHING, db_column='id_requerimientos_elementos')
    id_requerimientos_tipos = models.ForeignKey('RequerimientosTipos', models.DO_NOTHING, db_column='id_requerimientos_tipos')
    id_operador_origen = models.IntegerField()
    id_operador_asignado = models.IntegerField()
    id_operador_cierre = models.IntegerField()
    id_grupo_origen = models.IntegerField()
    id_grupo_actual = models.IntegerField()
    id_requerimientos_estados = models.ForeignKey('RequerimientosEstados', models.DO_NOTHING, db_column='id_requerimientos_estados', blank=True, null=True)
    id_cliente = models.IntegerField(blank=True, null=True)
    id_contrato = models.IntegerField(blank=True, null=True)
    id_suscriptor_producto_bodega = models.IntegerField(blank=True, null=True)
    solucion_en_linea = models.IntegerField()
    tipo_requerimiento = models.CharField(max_length=15)
    descripcion = models.TextField(blank=True, null=True)
    actividad = models.TextField(blank=True, null=True)
    fecha_creacion = models.DateTimeField()
    fecha_ultima_modificacion = models.DateTimeField(blank=True, null=True)
    fecha_cierre = models.DateTimeField(blank=True, null=True)
    prioridad = models.IntegerField(blank=True, null=True)
    numero_correos_enviados = models.CharField(max_length=6, blank=True, null=True)
    fecha_envio_ultimo_correo = models.DateTimeField(blank=True, null=True)
    nivel_requerimiento = models.CharField(max_length=100, blank=True, null=True)
    confirmar_lectura = models.IntegerField()
    fecha_confirma_lectura = models.DateTimeField(blank=True, null=True)
    id_punto_venta = models.IntegerField()
    hh = models.FloatField(blank=True, null=True)
    hh_cobro = models.FloatField(blank=True, null=True)
    fecha_agenda = models.DateField(blank=True, null=True)
    id_ejecutivo = models.IntegerField()
    id_ejecutivo_retiro = models.IntegerField()

    class Meta:
        managed = False
        db_table = '"dm_requerimientos"."requerimientos"'


class RequerimientosAsignacion(models.Model):
    id_empresa = models.IntegerField()
    id_requerimiento = models.ForeignKey(Requerimientos, models.DO_NOTHING, db_column='id_requerimiento')
    id_grupo = models.IntegerField()
    inicio_asignacion = models.DateTimeField()
    fin_asignacion = models.DateTimeField(blank=True, null=True)
    id_requerimientos_estados = models.ForeignKey('RequerimientosEstados', models.DO_NOTHING, db_column='id_requerimientos_estados')

    class Meta:
        managed = False
        db_table = '"dm_requerimientos"."requerimientos_asignacion"'


class RequerimientosDetalle(models.Model):
    id_empresa = models.IntegerField()
    id_requerimiento = models.ForeignKey(Requerimientos, models.DO_NOTHING, db_column='id_requerimiento')
    tipo = models.CharField(max_length=255, blank=True, null=True)
    detalle = models.CharField(max_length=255)

    class Meta:
        managed = False
        db_table = '"dm_requerimientos"."requerimientos_detalle"'


class RequerimientosElementos(models.Model):
    id_empresa = models.IntegerField()
    id_requerimientos_tipos = models.ForeignKey('RequerimientosTipos', models.DO_NOTHING, db_column='id_requerimientos_tipos')
    etiqueta_elemento = models.CharField(max_length=255)
    envia_correo = models.IntegerField()
    asignable = models.IntegerField()
    modificable = models.IntegerField()
    requiere_documento = models.IntegerField()
    max_envio_correo = models.IntegerField()
    intervalo_envio_correo = models.IntegerField()
    boton_accion = models.CharField(max_length=50, blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_requerimientos"."requerimientos_elementos"'


class RequerimientosEstados(models.Model):
    nombre_estado = models.CharField(max_length=20)

    class Meta:
        managed = False
        db_table = '"dm_requerimientos"."requerimientos_estados"'


class RequerimientosTipos(models.Model):
    id_empresa = models.IntegerField()
    id_grupo = models.IntegerField()
    etiqueta = models.CharField(max_length=255)
    asignable = models.IntegerField()
    modificable = models.IntegerField()

    class Meta:
        managed = False
        db_table = '"dm_requerimientos"."requerimientos_tipos"'


class Sla(models.Model):
    id_empresa = models.IntegerField()
    id_requerimientos_estados = models.ForeignKey(RequerimientosEstados, models.DO_NOTHING, db_column='id_requerimientos_estados')
    id_operador1 = models.IntegerField(blank=True, null=True)
    tiempo_limite1 = models.IntegerField(blank=True, null=True)
    color1 = models.CharField(max_length=7, blank=True, null=True)
    id_operador2 = models.IntegerField(blank=True, null=True)
    tiempo_limite2 = models.IntegerField(blank=True, null=True)
    color2 = models.CharField(max_length=7, blank=True, null=True)
    id_operador3 = models.IntegerField(blank=True, null=True)
    tiempo_limite3 = models.IntegerField(blank=True, null=True)
    color3 = models.CharField(max_length=7, blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_requerimientos"."sla"'


=== ./dm_requerimientos/tests.py ===
from django.test import TestCase

# Create your tests here.


=== ./dm_requerimientos/apps.py ===
from django.apps import AppConfig


class DmRequerimientosConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'dm_requerimientos'


=== ./manage.py ===
#!/usr/bin/env python
"""Django's command-line utility for administrative tasks."""
import os
import sys


def main():
    """Run administrative tasks."""
    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'proyectoDesarrollo.settings')
    try:
        from django.core.management import execute_from_command_line
    except ImportError as exc:
        raise ImportError(
            "Couldn't import Django. Are you sure it's installed and "
            "available on your PYTHONPATH environment variable? Did you "
            "forget to activate a virtual environment?"
        ) from exc
    execute_from_command_line(sys.argv)


if __name__ == '__main__':
    main()


=== ./gunicorn_start.sh ===
#!/bin/bash
# Nombre del proyecto
NAME="proyectoDesarrollo"
# Directorio del proyecto (ajusta la ruta a tu proyecto)
DJANGODIR="/home/ignrv/proyectos/Gunicorn/proyectoDesarrollo"
# Directorio del entorno virtual (ajusta la ruta a tu venv)
VENV="/home/ignrv/proyectos/Gunicorn/venv/bin/activate"
# Número de workers (ajusta según tus necesidades)
NUM_WORKERS=3
# Módulo WSGI de Django
DJANGO_WSGI_MODULE="proyectoDesarrollo.wsgi:application"

echo "Iniciando Gunicorn para $NAME como $(whoami)"

# Entrar al directorio del proyecto
cd $DJANGODIR || exit
# Activar el entorno virtual
source $VENV

# Exportar la variable de entorno de configuración (si no está ya definida)
export DJANGO_SETTINGS_MODULE=proyectoDesarrollo.settings

# Iniciar Gunicorn
exec gunicorn $DJANGO_WSGI_MODULE \
  --name $NAME \
  --workers $NUM_WORKERS \
  --bind 0.0.0.0:8000 \
  --log-level=info \
  --log-file=-


=== ./dm_logistica/serializer.py ===


=== ./dm_logistica/admin.py ===
from django.contrib import admin

# Register your models here.


=== ./dm_logistica/urls.py ===


=== ./dm_logistica/__init__.py ===


=== ./dm_logistica/migrations/__init__.py ===


=== ./dm_logistica/views.py ===
from django.shortcuts import render

# Create your views here.


=== ./dm_logistica/models.py ===
# This is an auto-generated Django model module.
# You'll have to do the following manually to clean this up:
#   * Rearrange models' order
#   * Make sure each model has one field with primary_key=True
#   * Make sure each ForeignKey and OneToOneField has `on_delete` set to the desired behavior
#   * Remove `managed = False` lines if you wish to allow Django to create, modify, and delete the table
# Feel free to rename the models, but don't rename db_table values or field names.
from django.db import models


class AjusteDetalleCompra(models.Model):
    id_empresa = models.IntegerField()
    id_proceso_comparacion = models.ForeignKey('ProcesoComparacion', models.DO_NOTHING, db_column='id_proceso_comparacion')
    id_orden_compra = models.ForeignKey('OrdenCompra', models.DO_NOTHING, db_column='id_orden_compra')
    id_detalle_compra = models.ForeignKey('DetalleCompra', models.DO_NOTHING, db_column='id_detalle_compra')
    cantidad = models.IntegerField(blank=True, null=True)
    precio_unitario = models.FloatField()
    glosa = models.CharField(max_length=100)
    descuento = models.FloatField()
    tipo_descuento = models.CharField(max_length=10, blank=True, null=True)
    total_neto = models.FloatField()

    class Meta:
        managed = False
        db_table = '"dm_logistica"."ajuste_detalle_compra"'


class Atributo(models.Model):
    id_empresa = models.IntegerField()
    id_modelo_producto = models.IntegerField()
    nombre_atributo = models.CharField(max_length=100)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."atributo"'


class AtributoDetalle(models.Model):
    id_empresa = models.IntegerField()
    id_atributo = models.ForeignKey(Atributo, models.DO_NOTHING, db_column='id_atributo')
    id_producto_bodega = models.ForeignKey('ProductoBodega', models.DO_NOTHING, db_column='id_producto_bodega')
    valor = models.CharField(max_length=255, blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."atributo_detalle"'


class Bodega(models.Model):
    id_empresa = models.IntegerField()
    id_bodega_tipo = models.ForeignKey('BodegaTipo', models.DO_NOTHING, db_column='id_bodega_tipo')
    estado_bodega = models.IntegerField()
    nombre_bodega = models.CharField(max_length=100)
    nombre_tipo_bodega = models.CharField(max_length=50, blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."bodega"'


class BodegaStock(models.Model):
    id_empresa = models.IntegerField()
    id_bodega = models.ForeignKey(Bodega, models.DO_NOTHING, db_column='id_bodega')
    id_modelo_producto = models.IntegerField()
    stock_critico = models.IntegerField(blank=True, null=True)
    porc_alarma = models.IntegerField(blank=True, null=True)
    alarma = models.SmallIntegerField(blank=True, null=True)
    id_grupo = models.IntegerField(blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."bodega_stock"'


class BodegaTipo(models.Model):
    nombre_tipo_bodega = models.CharField(max_length=50)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."bodega_tipo"'


class ControlInventario(models.Model):
    id_empresa = models.IntegerField(blank=True, null=True)
    fecha = models.DateTimeField(blank=True, null=True)
    id_control_inventario = models.IntegerField(blank=True, null=True)
    id_operador = models.IntegerField()
    id_bodega = models.ForeignKey(Bodega, models.DO_NOTHING, db_column='id_bodega', blank=True, null=True)
    id_estado_control_inventario = models.ForeignKey('EstadoControlInventario', models.DO_NOTHING, db_column='id_estado_control_inventario', blank=True, null=True)
    id_tipo_control_inventario = models.ForeignKey('TipoControlInventario', models.DO_NOTHING, db_column='id_tipo_control_inventario', blank=True, null=True)
    fecha_termino = models.DateTimeField(blank=True, null=True)
    observaciones = models.TextField(blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."control_inventario"'


class Cotizacion(models.Model):
    id_empresa = models.IntegerField()
    id_proveedor = models.ForeignKey('Proveedor', models.DO_NOTHING, db_column='id_proveedor')
    id_solicitud_compra = models.ForeignKey('SolicitudCompra', models.DO_NOTHING, db_column='id_solicitud_compra', blank=True, null=True)
    fecha_cotizacion = models.DateTimeField()
    total = models.FloatField(blank=True, null=True)
    validez_cotizacion = models.IntegerField(blank=True, null=True)
    archivo = models.CharField(max_length=256, blank=True, null=True)
    estado_cotizacion = models.IntegerField(blank=True, null=True)
    estado_detalle = models.IntegerField(blank=True, null=True)
    iva = models.IntegerField(blank=True, null=True)
    folio = models.CharField(max_length=64, blank=True, null=True)
    id_operador = models.IntegerField()
    id_tipo_moneda = models.IntegerField(blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."cotizacion"'


class DetalleCompra(models.Model):
    id_empresa = models.IntegerField()
    id_orden_compra = models.ForeignKey('OrdenCompra', models.DO_NOTHING, db_column='id_orden_compra')
    id_modelo_producto = models.IntegerField(blank=True, null=True)
    cantidad = models.IntegerField(blank=True, null=True)
    precio_unitario = models.FloatField(blank=True, null=True)
    glosa = models.CharField(max_length=100, blank=True, null=True)
    descuento_unitario = models.FloatField(blank=True, null=True)
    total_neto = models.FloatField(blank=True, null=True)
    tipo_item = models.IntegerField(blank=True, null=True)
    comprobado = models.IntegerField()
    producto_ingresado = models.IntegerField()
    fecha_ingreso_producto = models.DateTimeField(blank=True, null=True)
    id_operador_ingreso_producto = models.IntegerField(blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."detalle_compra"'


class DetalleControlInventario(models.Model):
    id_empresa = models.IntegerField(blank=True, null=True)
    id_producto_bodega = models.ForeignKey('ProductoBodega', models.DO_NOTHING, db_column='id_producto_bodega', blank=True, null=True)
    id_estado_detalle_control_inventario = models.ForeignKey('EstadoDetalleControlInventario', models.DO_NOTHING, db_column='id_estado_detalle_control_inventario', blank=True, null=True)
    serie = models.CharField(max_length=100, blank=True, null=True)
    id_modelo_producto = models.IntegerField(blank=True, null=True)
    id_estado_producto = models.ForeignKey('EstadoProducto', models.DO_NOTHING, db_column='id_estado_producto', blank=True, null=True)
    cantidad_original = models.FloatField(blank=True, null=True)
    cantidad_actual = models.FloatField(blank=True, null=True)
    nombre_modelo = models.CharField(max_length=100, blank=True, null=True)
    producto_seriado = models.IntegerField(blank=True, null=True)
    nombre_unidad_medida = models.CharField(max_length=30, blank=True, null=True)
    nombre_serie = models.CharField(max_length=45, blank=True, null=True)
    fecha = models.DateTimeField(blank=True, null=True)
    fecha_verificacion = models.DateTimeField(blank=True, null=True)
    id_control_inventario = models.ForeignKey(ControlInventario, models.DO_NOTHING, db_column='id_control_inventario', blank=True, null=True)
    id_operador = models.IntegerField()
    id_operador_verificador = models.IntegerField(blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."detalle_control_inventario"'


class DetalleCotizacion(models.Model):
    id_empresa = models.IntegerField()
    id_cotizacion = models.ForeignKey(Cotizacion, models.DO_NOTHING, db_column='id_cotizacion')
    id_proveedor = models.ForeignKey('Proveedor', models.DO_NOTHING, db_column='id_proveedor', blank=True, null=True)
    fecha_registro = models.DateTimeField(blank=True, null=True)
    cantidad = models.CharField(max_length=50, blank=True, null=True)
    detalles = models.CharField(max_length=255, blank=True, null=True)
    descuento_unitario = models.FloatField(blank=True, null=True)
    precio_unitario = models.FloatField(blank=True, null=True)
    id_modelo_producto = models.IntegerField(blank=True, null=True)
    tipo_descuento = models.CharField(max_length=5, blank=True, null=True)
    tipo_item = models.IntegerField(blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."detalle_cotizacion"'


class EstadoControlInventario(models.Model):
    id_empresa = models.IntegerField(blank=True, null=True)
    id_estado_solicitud_compra = models.ForeignKey('EstadoSolicitudCompra', models.DO_NOTHING, db_column='id_estado_solicitud_compra', blank=True, null=True)
    id_estado_compra = models.IntegerField(blank=True, null=True)
    id_estado_control_inventario = models.IntegerField(blank=True, null=True)
    detalle = models.CharField(max_length=50, blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."estado_control_inventario"'


class EstadoDetalleControlInventario(models.Model):
    descripcion = models.CharField(max_length=45, blank=True, null=True)
    boton = models.IntegerField(blank=True, null=True)
    dboton = models.CharField(max_length=15, blank=True, null=True)
    icon = models.CharField(max_length=20, blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."estado_detalle_control_inventario"'


class EstadoOrdenCompra(models.Model):
    descripcion = models.CharField(max_length=100)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."estado_orden_compra"'


class EstadoProducto(models.Model):
    nombre_estado_producto = models.CharField(max_length=50)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."estado_producto"'


class EstadoSolicitudCompra(models.Model):
    descripcion_solicitud_compra = models.CharField(max_length=100)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."estado_solicitud_compra"'


class Giro(models.Model):
    id_empresa = models.IntegerField()
    id_proveedor = models.ForeignKey('Proveedor', models.DO_NOTHING, db_column='id_proveedor')
    descrip_giro = models.CharField(max_length=250)
    codigo_sii = models.CharField(max_length=10)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."giro"'


class IdentificadorSerie(models.Model):
    nombre_serie = models.CharField(max_length=45)
    estado_serie = models.IntegerField()

    class Meta:
        managed = False
        db_table = '"dm_logistica"."identificador_serie"'


class MarcaProducto(models.Model):
    id_empresa = models.IntegerField()
    nombre_marca_producto = models.CharField(max_length=50)
    estado = models.IntegerField()

    class Meta:
        managed = False
        db_table = '"dm_logistica"."marca_producto"'


class ModeloProducto(models.Model):
    id_modelo_producto = models.IntegerField()
    id_empresa = models.IntegerField()
    id_tipo_marca_producto = models.ForeignKey('TipoMarcaProducto', models.DO_NOTHING, db_column='id_tipo_marca_producto')
    id_identificador_serie = models.ForeignKey(IdentificadorSerie, models.DO_NOTHING, db_column='id_identificador_serie')
    id_unidad_medida = models.ForeignKey('UnidadMedida', models.DO_NOTHING, db_column='id_unidad_medida')
    codigo_interno = models.CharField(max_length=50, blank=True, null=True)
    fccid = models.CharField(max_length=50, blank=True, null=True)
    sku = models.CharField(max_length=255, blank=True, null=True)
    sku_codigo = models.CharField(max_length=255, blank=True, null=True)
    nombre_modelo = models.CharField(max_length=100)
    descripcion = models.TextField(blank=True, null=True)
    imagen = models.CharField(max_length=200, blank=True, null=True)
    estado = models.IntegerField()
    numero_parte = models.CharField(max_length=100)
    producto_seriado = models.IntegerField()
    nombre_comercial = models.CharField(max_length=255, blank=True, null=True)
    nombre_tecnico = models.CharField(max_length=255, blank=True, null=True)
    so = models.CharField(max_length=100, blank=True, null=True)
    vso = models.CharField(max_length=100, blank=True, null=True)
    version_hw = models.CharField(max_length=100, blank=True, null=True)
    vspc = models.CharField(max_length=100, blank=True, null=True)
    vspf = models.CharField(max_length=100, blank=True, null=True)
    fabricante = models.CharField(max_length=255, blank=True, null=True)
    ubicacion = models.CharField(max_length=255, blank=True, null=True)
    despacho_express = models.IntegerField()
    rebaja_consumo = models.IntegerField(blank=True, null=True)
    dias_rebaja_consumo = models.IntegerField(blank=True, null=True)
    orden_solicitud_despacho = models.IntegerField(blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."modelo_producto"'


class ModeloProductoValores(models.Model):
    id_empresa = models.IntegerField()
    id_modelo_producto = models.IntegerField()
    valor_cliente = models.IntegerField(blank=True, null=True)
    valor_publico = models.IntegerField(blank=True, null=True)
    margen = models.IntegerField(blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."modelo_producto_valores"'


class Movimiento(models.Model):
    id_empresa = models.IntegerField()
    folio = models.CharField(max_length=9, blank=True, null=True)
    observacion = models.TextField(blank=True, null=True)
    operador_emision = models.IntegerField()
    operador_destino = models.IntegerField()
    id_tipo_movimiento = models.IntegerField(blank=True, null=True)
    id_bodega = models.ForeignKey(Bodega, models.DO_NOTHING, db_column='id_bodega')
    fecha_registro = models.DateTimeField()
    tipo_movimiento = models.CharField(max_length=50, blank=True, null=True)
    id_bodega_origen = models.ForeignKey(Bodega, models.DO_NOTHING, db_column='id_bodega_origen', related_name='movimiento_id_bodega_origen_set')
    id_despachador = models.IntegerField(blank=True, null=True)
    id_receptor = models.IntegerField(blank=True, null=True)
    id_punto_venta = models.IntegerField(blank=True, null=True)
    pdf = models.CharField(max_length=255, blank=True, null=True)
    folio_comprobante = models.CharField(max_length=32, blank=True, null=True)
    fecha_actualizacion = models.DateTimeField(blank=True, null=True)
    id_requerimiento = models.IntegerField()

    class Meta:
        managed = False
        db_table = '"dm_logistica"."movimiento"'


class MovimientoBodega(models.Model):
    id_empresa = models.IntegerField()
    id_movimiento = models.ForeignKey(Movimiento, models.DO_NOTHING, db_column='id_movimiento', blank=True, null=True)
    id_producto_bodega = models.ForeignKey('ProductoBodega', models.DO_NOTHING, db_column='id_producto_bodega', blank=True, null=True)
    id_ejecutivo_terreno = models.IntegerField(blank=True, null=True)
    estado = models.CharField(max_length=15, blank=True, null=True)
    id_ejecutivo_recibe = models.IntegerField(blank=True, null=True)
    obs = models.CharField(max_length=255, blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."movimiento_bodega"'


class OrdenCompra(models.Model):
    id_empresa = models.IntegerField()
    id_cotizacion = models.ForeignKey(Cotizacion, models.DO_NOTHING, db_column='id_cotizacion')
    id_solicitante = models.IntegerField()
    id_operador = models.IntegerField()
    id_estado_orden_compra = models.ForeignKey(EstadoOrdenCompra, models.DO_NOTHING, db_column='id_estado_orden_compra')
    id_solicitud_compra = models.ForeignKey('SolicitudCompra', models.DO_NOTHING, db_column='id_solicitud_compra')
    id_proveedor = models.ForeignKey('Proveedor', models.DO_NOTHING, db_column='id_proveedor')
    folio = models.CharField(max_length=30, blank=True, null=True)
    fecha = models.DateTimeField()
    neto = models.FloatField(blank=True, null=True)
    iva = models.FloatField(blank=True, null=True)
    monto_total = models.FloatField(blank=True, null=True)
    observacion = models.TextField(blank=True, null=True)
    fecha_entrega = models.DateTimeField(blank=True, null=True)
    id_aprobador = models.IntegerField()
    archivo = models.CharField(max_length=256, blank=True, null=True)
    notas_adicionales = models.TextField(blank=True, null=True)
    id_requerimiento = models.IntegerField()
    id_tipo_moneda = models.IntegerField(blank=True, null=True)
    operador_anula = models.IntegerField()
    fecha_anula = models.DateTimeField(blank=True, null=True)
    motivo_anula = models.TextField(blank=True, null=True)
    desviacion = models.CharField(max_length=2, blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."orden_compra"'


class ProcesoComparacion(models.Model):
    id_empresa = models.IntegerField()
    id_orden_compra = models.ForeignKey(OrdenCompra, models.DO_NOTHING, db_column='id_orden_compra')
    id_operador = models.IntegerField()
    fecha_comparacion = models.DateTimeField()
    estado_comparacion = models.IntegerField()
    observacion = models.TextField(blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."proceso_comparacion"'


class ProductoBodega(models.Model):
    id_empresa = models.IntegerField()
    id_detalle_compra = models.ForeignKey(DetalleCompra, models.DO_NOTHING, db_column='id_detalle_compra')
    serie = models.CharField(max_length=100)
    id_bodega = models.ForeignKey(Bodega, models.DO_NOTHING, db_column='id_bodega')
    id_modelo_producto = models.IntegerField()
    id_estado_producto = models.ForeignKey(EstadoProducto, models.DO_NOTHING, db_column='id_estado_producto')
    id_producto_bodega_pack = models.ForeignKey('self', models.DO_NOTHING, db_column='id_producto_bodega_pack', blank=True, null=True)
    lote = models.CharField(max_length=50, blank=True, null=True)
    cantidad_original = models.FloatField()
    id_producto_bodega_origen = models.ForeignKey('self', models.DO_NOTHING, db_column='id_producto_bodega_origen', related_name='productobodega_id_producto_bodega_origen_set')
    cantidad_actual = models.FloatField()
    fecha_registro = models.DateTimeField()
    ubicacion = models.CharField(max_length=255, blank=True, null=True)
    id_operador = models.IntegerField()
    id_ejecutivo_stock = models.IntegerField()
    id_punto_venta_stock = models.IntegerField()
    id_movimiento = models.ForeignKey(Movimiento, models.DO_NOTHING, db_column='id_movimiento')
    inventario = models.TextField(blank=True, null=True)
    tipo_serie = models.CharField(max_length=50, blank=True, null=True)
    valor_serie = models.IntegerField(blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."producto_bodega"'


class Proveedor(models.Model):
    # ------------------------------------------------------------------ #
    #  CAMBIOS PRINCIPALES                                               #
    # ------------------------------------------------------------------ #
    # • id_giro (FK)        → **eliminado** (la relación ya no aplica)
    # • giro (CharField)    → **nuevo campo** que almacena el código SII
    #                          del giro como texto (p. ej. "7273824").
    # ------------------------------------------------------------------ #
    giro = models.CharField(max_length=10)                       # ← NEW
    descrip_giro = models.CharField(max_length=250, blank=True, null=True)

    id_empresa = models.IntegerField()
    rut = models.CharField(max_length=20)
    nombre_rs = models.CharField(max_length=200)
    nombre_fantasia = models.CharField(max_length=200, blank=True, null=True)
    web = models.CharField(max_length=50, blank=True, null=True)
    fecha_alta = models.DateTimeField()
    modalidad_pago = models.CharField(max_length=50, blank=True, null=True)
    plazo_pago = models.IntegerField(blank=True, null=True)
    estado = models.IntegerField(blank=True, null=True)
    direccion = models.CharField(max_length=255, blank=True, null=True)
    id_comuna = models.IntegerField(blank=True, null=True)
    id_region = models.IntegerField(blank=True, null=True)
    proveedor_unico = models.IntegerField(blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."proveedor"'


class ProveedorContactos(models.Model):
    id_proveedor_telefono = models.ForeignKey('ProveedorTelefono', models.DO_NOTHING, db_column='id_proveedor_telefono')
    contacto = models.CharField(max_length=100, blank=True, null=True)
    relacion_contacto = models.CharField(max_length=50, blank=True, null=True)
    telefono_contacto = models.CharField(max_length=20, blank=True, null=True)
    mail_contacto = models.CharField(max_length=50, blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."proveedor_contactos"'


class ProveedorTelefono(models.Model):
    id_proveedor = models.ForeignKey(Proveedor, models.DO_NOTHING, db_column='id_proveedor')
    telefono = models.CharField(max_length=50, blank=True, null=True)
    principal = models.BooleanField(blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."proveedor_telefono"'


class ServiciosBasicos(models.Model):
    id_empresa = models.IntegerField()
    id_operador = models.IntegerField()
    id_proveedor = models.ForeignKey(Proveedor, models.DO_NOTHING, db_column='id_proveedor', blank=True, null=True)
    item_presupuesto = models.CharField(max_length=6, blank=True, null=True)
    fecha_registro = models.DateTimeField()
    observacion = models.TextField(blank=True, null=True)
    id_punto_venta = models.IntegerField(blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."servicios_basicos"'


class ServiciosCajaChica(models.Model):
    monto = models.FloatField(blank=True, null=True)
    id_empresa = models.IntegerField()
    id_operador = models.IntegerField()
    id_operador_autoriza = models.CharField(max_length=50)
    fecha_registro = models.DateTimeField()
    fecha_autoriza = models.DateField(blank=True, null=True)
    nota = models.TextField(blank=True, null=True)
    estado = models.CharField(max_length=50, blank=True, null=True)
    motivo_rechazo = models.TextField(blank=True, null=True)
    archivo = models.CharField(max_length=255, blank=True, null=True)
    id_punto_venta = models.IntegerField(blank=True, null=True)
    id_solicitante = models.CharField(max_length=50, blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."servicios_caja_chica"'


class ServiciosCajaChicaDetalle(models.Model):
    id_empresa = models.IntegerField()
    id_servicios_caja_chica = models.ForeignKey(ServiciosCajaChica, models.DO_NOTHING, db_column='id_servicios_caja_chica', blank=True, null=True)
    tipo_doc = models.CharField(max_length=50, blank=True, null=True)
    fecha_emision = models.DateTimeField(blank=True, null=True)
    razon_social = models.CharField(max_length=50, blank=True, null=True)
    folio_dt = models.CharField(max_length=50, blank=True, null=True)
    monto = models.FloatField(blank=True, null=True)
    detalle = models.CharField(max_length=255, blank=True, null=True)
    item_presupuesto = models.CharField(max_length=10, blank=True, null=True)
    archivo = models.CharField(max_length=255, blank=True, null=True)
    id_operador = models.IntegerField()
    fecha_registro = models.DateTimeField(blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."servicios_caja_chica_detalle"'


class SolicitudCompra(models.Model):
    id_empresa = models.IntegerField()
    id_operador = models.IntegerField()
    id_aprobador = models.IntegerField()
    id_estado_solicitud_compra = models.ForeignKey(EstadoSolicitudCompra, models.DO_NOTHING, db_column='id_estado_solicitud_compra')
    fecha_registro = models.DateTimeField()
    descripcion = models.TextField()
    fecha_solicitud_compra = models.DateTimeField(blank=True, null=True)
    id_tipo_solicitud = models.ForeignKey('TipoSolicitud', models.DO_NOTHING, db_column='id_tipo_solicitud')
    titulo = models.CharField(max_length=100, blank=True, null=True)
    ruta_file = models.CharField(max_length=255, blank=True, null=True)
    cod_presupuesto = models.CharField(max_length=10, blank=True, null=True)
    id_punto_venta = models.IntegerField(blank=True, null=True)
    operador_rechazo = models.CharField(max_length=50, blank=True, null=True)
    fecha_rechazo = models.DateTimeField(blank=True, null=True)
    motivo_rechazo = models.TextField(blank=True, null=True)
    id_requerimiento = models.IntegerField(blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."solicitud_compra"'


class TipoControlInventario(models.Model):
    detalle = models.CharField(max_length=50, blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."tipo_control_inventario"'


class TipoMarcaProducto(models.Model):
    id_empresa = models.IntegerField()
    id_tipo_producto = models.ForeignKey('TipoProducto', models.DO_NOTHING, db_column='id_tipo_producto')
    id_marca_producto = models.ForeignKey(MarcaProducto, models.DO_NOTHING, db_column='id_marca_producto')

    class Meta:
        managed = False
        db_table = '"dm_logistica"."tipo_marca_producto"'


class TipoProducto(models.Model):
    codigo_tipo_producto = models.CharField(max_length=255, blank=True, null=True)
    id_empresa = models.IntegerField()
    nombre_tipo_producto = models.CharField(max_length=100)
    estado = models.IntegerField()

    class Meta:
        managed = False
        db_table = '"dm_logistica"."tipo_producto"'


class TipoSolicitud(models.Model):
    descripcion = models.CharField(max_length=30, blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."tipo_solicitud"'


class UnidadMedida(models.Model):
    nombre_unidad_medida = models.CharField(max_length=30, blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_logistica"."unidad_medida"'


=== ./dm_logistica/tests.py ===
from django.test import TestCase

# Create your tests here.


=== ./dm_logistica/apps.py ===
from django.apps import AppConfig


class DmLogisticaConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'dm_logistica'


=== ./dm_sistema/serializer.py ===
# ./dm_sistema/serializer.py
from rest_framework import serializers

from dm_sistema.models import Operador
from dm_logistica.models import (
    Proveedor,
    Bodega,
    BodegaTipo,
)

# ------------------------------------------------------------------------- #
#  SERIALIZADORES PARA LOGIN / VERIFICACIÓN                                 #
# ------------------------------------------------------------------------- #
class OperadorLoginSerializer(serializers.Serializer):
    username = serializers.CharField(max_length=50, trim_whitespace=True)
    password = serializers.CharField(max_length=128, write_only=True)


class OperadorVerificarSerializer(serializers.Serializer):
    username = serializers.CharField(max_length=50, trim_whitespace=True)
    cod_verificacion = serializers.CharField(max_length=255, trim_whitespace=True)


class OperadorSerializer(serializers.ModelSerializer):
    class Meta:
        model  = Operador
        fields = "__all__"

# ------------------------------------------------------------------------- #
#  SERIALIZADOR PROVEEDOR – SIN id_giro, CON giro (char)                    #
# ------------------------------------------------------------------------- #
class ProveedorSerializer(serializers.ModelSerializer):
    class Meta:
        model  = Proveedor
        # definimos explícitamente para asegurar el orden y excluir campos
        fields = [
            "id",
            "giro",
            "descrip_giro",
            "id_empresa",
            "rut",
            "nombre_rs",
            "nombre_fantasia",
            "web",
            "fecha_alta",
            "modalidad_pago",
            "plazo_pago",
            "estado",
            "direccion",
            "id_comuna",
            "id_region",
            "proveedor_unico",
        ]


class BodegaSerializer(serializers.ModelSerializer):
    class Meta:
        model  = Bodega
        fields = "__all__"


class BodegaTipoSerializer(serializers.ModelSerializer):
    class Meta:
        model  = BodegaTipo
        fields = "__all__"


=== ./dm_sistema/admin.py ===
from django.contrib import admin

# Register your models here.


=== ./dm_sistema/urls.py ===
# --------------------------------------------------------------------------- #
# ./dm_sistema/urls.py                                                        #
# --------------------------------------------------------------------------- #
from django.urls import path

from .views import (
    OperadorLoginAPIView,
    OperadorCodigoVerificacionAPIView,
    OperadorSesionActivaTokenAPIView,
    OperadorLogoutAPIView,
    # -------- LOGÍSTICA -------- #
    ProveedorCreateAPIView,
    ProveedorListAPIView,
    ProveedorDetailAPIView,
    ProveedorUpdateAPIView,      # ← NUEVO
    BodegaListAPIView,
)

urlpatterns = [
    # --------------------------------------------------------- #
    #  OPERADORES                                               #
    # --------------------------------------------------------- #
    path("operadores/validar/",   OperadorLoginAPIView.as_view(),              name="operador-login"),
    path("operadores/verificar/", OperadorCodigoVerificacionAPIView.as_view(), name="operador-verificar"),
    path(
        "operadores/sesiones-activas-token/",
        OperadorSesionActivaTokenAPIView.as_view(),
        name="operador-sesion-por-token",
    ),
    path("operadores/logout/", OperadorLogoutAPIView.as_view(), name="operador-logout"),

    # --------------------------------------------------------- #
    #  LOGÍSTICA → PROVEEDORES                                  #
    # --------------------------------------------------------- #
    path(
        "logistica/proveedores/crear/",
        ProveedorCreateAPIView.as_view(),
        name="proveedor-crear",
    ),
    path(
        "logistica/proveedores/",
        ProveedorListAPIView.as_view(),
        name="proveedor-listar",
    ),
    path(
        "logistica/proveedores/detalle/",
        ProveedorDetailAPIView.as_view(),
        name="proveedor-detalle",
    ),
    path(
        "logistica/proveedores/editar/",
        ProveedorUpdateAPIView.as_view(),
        name="proveedor-editar",
    ),

    # --------------------------------------------------------- #
    #  LOGÍSTICA → BODEGAS                                      #
    # --------------------------------------------------------- #
    path(
        "logistica/bodegas/",
        BodegaListAPIView.as_view(),
        name="bodega-listar",
    ),
]


=== ./dm_sistema/__init__.py ===


=== ./dm_sistema/migrations/__init__.py ===


=== ./dm_sistema/views.py ===
# --------------------------------------------------------------------------- #
# ./dm_sistema/views.py                                                       #
# --------------------------------------------------------------------------- #
from __future__ import annotations

import crypt
import secrets
import jwt
import requests
from datetime import datetime, timezone as dt_timezone

from django.conf import settings
from django.db import transaction, connection
from django.utils import timezone
from rest_framework import status
from rest_framework.response import Response
from rest_framework.views import APIView

# ------------------------------------------------------------------ #
# MODELOS Y SERIALIZERS                                              #
# ------------------------------------------------------------------ #
from dm_logistica.models import (
    Proveedor,          # crear / listar / obtener / editar proveedor
    Bodega,             # listar bodegas
    BodegaTipo,
)
from .models import Operador, Sesiones, SesionesActivas
from .serializer import (
    OperadorLoginSerializer,
    OperadorVerificarSerializer,
    OperadorSerializer,
    ProveedorSerializer,
    BodegaSerializer,
    BodegaTipoSerializer,
)

# ------------------------------------------------------------------------- #
#  CONSTANTES SQL – SE COMPARTEN ENTRE LOS ENDPOINTS                        #
# ------------------------------------------------------------------------- #
QUERY_MODULOS = """
    SELECT c.nombre_menu,
           b.id_modulo,
           c.icon
      FROM dm_sistema.operador_empresa_modulos     a
INNER JOIN dm_sistema.empresa_modulo           b
        ON a.id_empresa_modulo = b.id_modulo
INNER JOIN dm_sistema.modulos                   c
        ON b.id_modulo         = c.id
     WHERE a.id_operador = %s
       AND b.estado      = 1
       AND c.estado      = 1
       AND b.id_empresa  = %s
  ORDER BY c.orden
"""

QUERY_FUNCIONALIDADES = """
    SELECT m.id, m.url, m.texto, m.etiqueta, m.descripcion,
           m.nivel_menu, m.orden, m.modificable, m.separador_up,
           m.id_modulo
      FROM dm_sistema.operador                        o
INNER JOIN dm_sistema.operador_empresa_modulos_menu oemm
        ON o.id                   = oemm.id_operador
INNER JOIN dm_sistema.empresa_modulos_menu          emm
        ON oemm.id_empresa_modulos_menu = emm.id_empresa_modulo
INNER JOIN dm_sistema.menus                        m
        ON emm.id_menu              = m.id
     WHERE o.id = %s
"""

# ------------------------------------------------------------------------- #
#  UTILIDAD → ENVÍO DE CORREOS                                              #
# ------------------------------------------------------------------------- #
def enviar_correo_python(
    remitente: str,
    correo_destino: str,
    asunto: str,
    detalle: str,
) -> None:
    try:
        requests.post(
            "http://mail.smartgest.cl/mailserver/server_mail.php",
            data={
                "destino": correo_destino,
                "asunto":  asunto,
                "detalle": detalle,
                "from":    remitente,
            },
            timeout=8,
        )
    except Exception as exc:                 # pragma: no cover
        print(f"[WARN] Falló el envío de correo: {exc}")


# ------------------------------------------------------------------------- #
#  HELPER → arma operador / modulos / funcionalidades                       #
# ------------------------------------------------------------------------- #
def build_payload(operador: Operador) -> dict:
    """Devuelve operador + módulos + funcionalidades (sin bodegas)."""
    operador_dict = OperadorSerializer(operador).data

    with connection.cursor() as cursor:
        cursor.execute(QUERY_MODULOS, [operador.id, operador.id_empresa_id])
        modulos = [
            {"nombre_menu": row[0], "id_modulo": row[1], "icon": row[2]}
            for row in cursor.fetchall()
        ]

        cursor.execute(QUERY_FUNCIONALIDADES, [operador.id])
        funcionalidades = [
            {
                "id":            row[0],
                "url":           row[1],
                "texto":         row[2],
                "etiqueta":      row[3],
                "descripcion":   row[4],
                "nivel_menu":    row[5],
                "orden":         row[6],
                "modificable":   row[7],
                "separador_up":  row[8],
                "id_modulo":     row[9],
            }
            for row in cursor.fetchall()
        ]

    return {
        "operador":        operador_dict,
        "modulos":         modulos,
        "funcionalidades": funcionalidades,
    }


# ------------------------------------------------------------------------- #
#  LOGIN / VALIDAR                                                          #
# ------------------------------------------------------------------------- #
class OperadorLoginAPIView(APIView):
    authentication_classes: list = []
    permission_classes:     list = []

    @staticmethod
    def _get_client_ip(request) -> str:
        xff = request.META.get("HTTP_X_FORWARDED_FOR")
        return xff.split(",")[0].strip() if xff else request.META.get("REMOTE_ADDR", "")

    def post(self, request, *args, **kwargs):
        serializer = OperadorLoginSerializer(data=request.data)
        if not serializer.is_valid():
            return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)

        username = serializer.validated_data["username"]
        password = serializer.validated_data["password"]

        try:
            op = Operador.objects.select_related("id_empresa").get(username=username)
        except Operador.DoesNotExist:
            return Response({"detail": "Credenciales inválidas"}, status=status.HTTP_401_UNAUTHORIZED)

        if crypt.crypt(password, op.password or "") != (op.password or ""):
            return Response({"detail": "Credenciales inválidas"}, status=status.HTTP_401_UNAUTHORIZED)

        empresa = op.id_empresa
        if not empresa or empresa.estado != 1:
            return Response({"detail": "La empresa asociada se encuentra inactiva."},
                            status=status.HTTP_403_FORBIDDEN)

        client_ip = self._get_client_ip(request)

        token_payload = {
            "sub": op.id,
            "iat": int(datetime.now(dt_timezone.utc).timestamp()),
            "jti": secrets.token_hex(8),
        }
        jwt_token = jwt.encode(token_payload, settings.SECRET_KEY, algorithm="HS256")
        cod_verificacion = secrets.token_hex(16)

        with transaction.atomic():
            sesion = Sesiones.objects.create(
                ip=client_ip,
                fecha=timezone.now(),
                id_operador=op,
                id_empresa=empresa,
            )
            SesionesActivas.objects.create(
                id_empresa=empresa,
                id_operador=op,
                id_sesion=sesion,
                fecha_registro=timezone.now(),
                token=jwt_token,
                cod_verificacion=cod_verificacion,
            )

        enviar_correo_python(
            "DM",
            op.username,
            "Código de Verificación",
            f"Hola, tu código es: {cod_verificacion}",
        )

        response = Response({"detail": "Credenciales válidas"}, status=status.HTTP_200_OK)
        response.set_cookie(
            key="auth_token",
            value=jwt_token,
            httponly=True,
            secure=True,
            samesite="Lax",
            max_age=60 * 60 * 24,
        )
        return response


# ------------------------------------------------------------------------- #
#  VERIFICAR CÓDIGO                                                         #
# ------------------------------------------------------------------------- #
class OperadorCodigoVerificacionAPIView(APIView):
    """
    POST /dm_sistema/operadores/verificar/
    """
    authentication_classes: list = []
    permission_classes:     list = []

    def post(self, request, *args, **kwargs):
        serializer = OperadorVerificarSerializer(data=request.data)
        if not serializer.is_valid():
            return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)

        username = serializer.validated_data["username"]
        codigo   = serializer.validated_data["cod_verificacion"]

        try:
            op = Operador.objects.select_related("id_empresa").get(username=username)
        except Operador.DoesNotExist:
            return Response({"detail": "Usuario o código inválido"}, status=status.HTTP_401_UNAUTHORIZED)

        if not op.id_empresa or op.id_empresa.estado != 1:
            return Response({"detail": "La empresa asociada se encuentra inactiva."},
                            status=status.HTTP_403_FORBIDDEN)

        sesion_activa = (
            SesionesActivas.objects
            .filter(id_operador=op, cod_verificacion=codigo)
            .order_by("-fecha_registro")
            .first()
        )
        if not sesion_activa:
            return Response({"detail": "Usuario o código inválido"}, status=status.HTTP_401_UNAUTHORIZED)

        with transaction.atomic():
            (SesionesActivas.objects
                .filter(id_operador=op)
                .exclude(pk=sesion_activa.pk)
                .delete())

        payload = build_payload(op)
        return Response(payload, status=status.HTTP_200_OK)


# ------------------------------------------------------------------------- #
#  OBTENER OPERADOR / MÓDULOS / FUNCIONALIDADES POR TOKEN                   #
# ------------------------------------------------------------------------- #
class OperadorSesionActivaTokenAPIView(APIView):
    """
    GET /dm_sistema/operadores/sesiones-activas-token/
    """
    authentication_classes: list = []
    permission_classes:     list = []

    def get(self, request, *args, **kwargs):
        token_cookie = request.COOKIES.get("auth_token")
        if not token_cookie:
            return Response({"detail": "Token no proporcionado"},
                            status=status.HTTP_401_UNAUTHORIZED)

        sesion_activa = (
            SesionesActivas.objects
            .select_related("id_operador", "id_operador__id_empresa")
            .filter(token=token_cookie)
            .first()
        )
        if not sesion_activa:
            return Response({"detail": "Token inválido o sesión expirada"},
                            status=status.HTTP_401_UNAUTHORIZED)

        if not sesion_activa.id_operador.id_empresa or sesion_activa.id_operador.id_empresa.estado != 1:
            return Response({"detail": "La empresa asociada se encuentra inactiva."},
                            status=status.HTTP_403_FORBIDDEN)

        return Response(build_payload(sesion_activa.id_operador), status=status.HTTP_200_OK)


# ------------------------------------------------------------------------- #
#  LOGOUT                                                                   #
# ------------------------------------------------------------------------- #
class OperadorLogoutAPIView(APIView):
    """
    GET /dm_sistema/operadores/logout/
    """
    authentication_classes: list = []
    permission_classes:     list = []

    def get(self, request, *args, **kwargs):
        token_cookie = request.COOKIES.get("auth_token")
        if not token_cookie:
            return Response({"detail": "Token no proporcionado"},
                            status=status.HTTP_401_UNAUTHORIZED)

        SesionesActivas.objects.filter(token=token_cookie).delete()

        response = Response({"detail": "Sesión cerrada correctamente"},
                            status=status.HTTP_200_OK)
        response.set_cookie(
            key="auth_token",
            value="",
            max_age=0,
            httponly=True,
            secure=True,
            samesite="Lax",
        )
        return response


# ------------------------------------------------------------------------- #
#  LISTAR PROVEEDORES POR EMPRESA                                           #
# ------------------------------------------------------------------------- #
class ProveedorListAPIView(APIView):
    """
    GET /dm_sistema/logistica/proveedores/
    """
    authentication_classes: list = []
    permission_classes:     list = []

    def get(self, request, *args, **kwargs):
        token_cookie = request.COOKIES.get("auth_token")
        if not token_cookie:
            return Response({"detail": "Token no proporcionado"},
                            status=status.HTTP_401_UNAUTHORIZED)

        sesion_activa = (
            SesionesActivas.objects
            .select_related("id_operador", "id_operador__id_empresa")
            .filter(token=token_cookie)
            .first()
        )
        if not sesion_activa:
            return Response({"detail": "Token inválido o sesión expirada"},
                            status=status.HTTP_401_UNAUTHORIZED)

        empresa = sesion_activa.id_operador.id_empresa
        if not empresa or empresa.estado != 1:
            return Response({"detail": "La empresa asociada se encuentra inactiva."},
                            status=status.HTTP_403_FORBIDDEN)

        qs = Proveedor.objects.filter(id_empresa=empresa.id).order_by("nombre_rs")
        return Response(ProveedorSerializer(qs, many=True).data, status=status.HTTP_200_OK)


# ------------------------------------------------------------------------- #
#  LISTAR BODEGAS POR EMPRESA (GET)                                         #
# ------------------------------------------------------------------------- #
class BodegaListAPIView(APIView):
    """
    GET /dm_sistema/logistica/bodegas/
    """
    authentication_classes: list = []
    permission_classes:     list = []

    def get(self, request, *args, **kwargs):
        token_cookie = request.COOKIES.get("auth_token")
        if not token_cookie:
            return Response({"detail": "Token no proporcionado"},
                            status=status.HTTP_401_UNAUTHORIZED)

        sesion_activa = (
            SesionesActivas.objects
            .select_related("id_operador", "id_operador__id_empresa")
            .filter(token=token_cookie)
            .first()
        )
        if not sesion_activa:
            return Response({"detail": "Token inválido o sesión expirada"},
                            status=status.HTTP_401_UNAUTHORIZED)

        empresa = sesion_activa.id_operador.id_empresa
        if not empresa or empresa.estado != 1:
            return Response({"detail": "La empresa asociada se encuentra inactiva."},
                            status=status.HTTP_403_FORBIDDEN)

        qs = Bodega.objects.filter(id_empresa=empresa.id).order_by("nombre_bodega")
        return Response(BodegaSerializer(qs, many=True).data, status=status.HTTP_200_OK)


# ------------------------------------------------------------------------- #
#  OBTENER DETALLE DE PROVEEDOR (POST)                                      #
# ------------------------------------------------------------------------- #
class ProveedorDetailAPIView(APIView):
    """
    POST /dm_sistema/logistica/proveedores/detalle/
    Body → {"id": <int>}
    """
    authentication_classes: list = []
    permission_classes:     list = []

    def post(self, request, *args, **kwargs):
        prov_id = request.data.get("id")
        if prov_id is None:
            return Response({"id": ["Este campo es obligatorio."]},
                            status=status.HTTP_400_BAD_REQUEST)

        token_cookie = request.COOKIES.get("auth_token")
        if not token_cookie:
            return Response({"detail": "Token no proporcionado"},
                            status=status.HTTP_401_UNAUTHORIZED)

        sesion_activa = (
            SesionesActivas.objects
            .select_related("id_operador", "id_operador__id_empresa")
            .filter(token=token_cookie)
            .first()
        )
        if not sesion_activa:
            return Response({"detail": "Token inválido o sesión expirada"},
                            status=status.HTTP_401_UNAUTHORIZED)

        empresa = sesion_activa.id_operador.id_empresa
        if not empresa or empresa.estado != 1:
            return Response({"detail": "La empresa asociada se encuentra inactiva."},
                            status=status.HTTP_403_FORBIDDEN)

        try:
            proveedor = Proveedor.objects.get(pk=prov_id, id_empresa=empresa.id)
        except Proveedor.DoesNotExist:
            return Response({"detail": "Proveedor no encontrado"},
                            status=status.HTTP_404_NOT_FOUND)

        return Response(ProveedorSerializer(proveedor).data, status=status.HTTP_200_OK)


# ------------------------------------------------------------------------- #
#  CREAR PROVEEDOR (POST)                                                   #
# ------------------------------------------------------------------------- #
class ProveedorCreateAPIView(APIView):
    """
    POST /dm_sistema/logistica/proveedores/crear/
    """
    authentication_classes: list = []
    permission_classes:     list = []

    def post(self, request, *args, **kwargs):
        token_cookie = request.COOKIES.get("auth_token")
        if not token_cookie:
            return Response({"detail": "Token no proporcionado"},
                            status=status.HTTP_401_UNAUTHORIZED)

        sesion_activa = (
            SesionesActivas.objects
            .select_related("id_operador", "id_operador__id_empresa")
            .filter(token=token_cookie)
            .first()
        )
        if not sesion_activa:
            return Response({"detail": "Token inválido o sesión expirada"},
                            status=status.HTTP_401_UNAUTHORIZED)

        empresa = sesion_activa.id_operador.id_empresa
        if not empresa or empresa.estado != 1:
            return Response({"detail": "La empresa asociada se encuentra inactiva."},
                            status=status.HTTP_403_FORBIDDEN)

        data = dict(request.data)
        data.pop("id_empresa", None)
        data["id_empresa"] = empresa.id
        data.setdefault("fecha_alta", datetime.now().date())

        serializer = ProveedorSerializer(data=data)
        if not serializer.is_valid():
            return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)

        with transaction.atomic():
            proveedor = serializer.save()

        return Response(ProveedorSerializer(proveedor).data, status=status.HTTP_201_CREATED)


# ------------------------------------------------------------------------- #
#  EDITAR PROVEEDOR (PUT)                                                   #
# ------------------------------------------------------------------------- #
class ProveedorUpdateAPIView(APIView):
    """
    PUT /dm_sistema/logistica/proveedores/editar/

    Body (JSON):
    {
        "id":            <int>,   # ← OBLIGATORIO
        "giro":          "...",
        "descrip_giro":  "...",
        "rut":           "...",
        "nombre_rs":     "...",
        ...
        "proveedor_unico": 0/1
    }

    • Requiere cookie `auth_token`.
    • Solo permite modificar proveedores de la misma empresa.
    • Se pueden enviar uno o varios campos; se aplica actualización parcial.
    """
    authentication_classes: list = []
    permission_classes:     list = []

    def put(self, request, *args, **kwargs):
        prov_id = request.data.get("id")
        if prov_id is None:
            return Response({"id": ["Este campo es obligatorio."]},
                            status=status.HTTP_400_BAD_REQUEST)

        token_cookie = request.COOKIES.get("auth_token")
        if not token_cookie:
            return Response({"detail": "Token no proporcionado"},
                            status=status.HTTP_401_UNAUTHORIZED)

        sesion_activa = (
            SesionesActivas.objects
            .select_related("id_operador", "id_operador__id_empresa")
            .filter(token=token_cookie)
            .first()
        )
        if not sesion_activa:
            return Response({"detail": "Token inválido o sesión expirada"},
                            status=status.HTTP_401_UNAUTHORIZED)

        empresa = sesion_activa.id_operador.id_empresa
        if not empresa or empresa.estado != 1:
            return Response({"detail": "La empresa asociada se encuentra inactiva."},
                            status=status.HTTP_403_FORBIDDEN)

        try:
            proveedor = Proveedor.objects.get(pk=prov_id, id_empresa=empresa.id)
        except Proveedor.DoesNotExist:
            return Response({"detail": "Proveedor no encontrado"},
                            status=status.HTTP_404_NOT_FOUND)

        # ------------------------------------------------------------------ #
        #  Construimos los datos de actualización                            #
        # ------------------------------------------------------------------ #
        update_data = dict(request.data)
        update_data.pop("id_empresa", None)   # no se permite cambiar
        update_data.pop("id", None)           # se ignora si viene
        # Si fecha_alta viene en blanco, la descartamos para evitar error:
        if update_data.get("fecha_alta", "").strip() == "":
            update_data.pop("fecha_alta")

        serializer = ProveedorSerializer(
            instance=proveedor,
            data=update_data,
            partial=True,          # ← permite omitir campos
        )
        if not serializer.is_valid():
            return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)

        with transaction.atomic():
            proveedor = serializer.save()

        return Response(ProveedorSerializer(proveedor).data, status=status.HTTP_200_OK)


=== ./dm_sistema/models.py ===
# This is an auto-generated Django model module.
# You'll have to do the following manually to clean this up:
#   * Rearrange models' order
#   * Make sure each model has one field with primary_key=True
#   * Make sure each ForeignKey and OneToOneField has `on_delete` set to the desired behavior
#   * Remove `managed = False` lines if you wish to allow Django to create, modify, and delete the table
# Feel free to rename the models, but don't rename db_table values or field names.
from django.db import models


class Empresa(models.Model):
    razon_social = models.CharField(max_length=100, blank=True, null=True)
    direccion = models.CharField(max_length=200, blank=True, null=True)
    comuna = models.CharField(max_length=50, blank=True, null=True)
    ciudad = models.CharField(max_length=50, blank=True, null=True)
    rut = models.CharField(max_length=20, blank=True, null=True)
    giro = models.CharField(max_length=255, blank=True, null=True)
    acteco = models.CharField(max_length=10, blank=True, null=True)
    rut_firma = models.CharField(max_length=20, blank=True, null=True)
    logo = models.CharField(max_length=50, blank=True, null=True)
    subdominio = models.CharField(max_length=50, blank=True, null=True)
    titulo = models.CharField(max_length=50, blank=True, null=True)
    estado = models.IntegerField(blank=True, null=True)
    fecha_incorporacion = models.DateTimeField(blank=True, null=True)
    master = models.BooleanField(blank=True, null=True)
    fecha_modificacion = models.DateTimeField(blank=True, null=True)
    licencias = models.IntegerField(blank=True, null=True)
    logo_grande = models.CharField(max_length=255, blank=True, null=True)
    ingreso_pcd = models.IntegerField()
    ingreso_funnel = models.IntegerField(blank=True, null=True)
    mercado = models.CharField(max_length=50, blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_sistema"."empresa"'


class EmpresaModulo(models.Model):
    id_empresa = models.ForeignKey(Empresa, models.DO_NOTHING, db_column='id_empresa')
    id_modulo = models.ForeignKey('Modulos', models.DO_NOTHING, db_column='id_modulo')
    estado = models.IntegerField(blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_sistema"."empresa_modulo"'


class EmpresaModulosMenu(models.Model):
    id_empresa_modulo = models.ForeignKey(EmpresaModulo, models.DO_NOTHING, db_column='id_empresa_modulo')
    id_menu = models.ForeignKey('Menus', models.DO_NOTHING, db_column='id_menu')

    class Meta:
        managed = False
        db_table = '"dm_sistema"."empresa_modulos_menu"'


class EmpresaParam(models.Model):
    id_empresa = models.ForeignKey(Empresa, models.DO_NOTHING, db_column='id_empresa')
    campo = models.CharField(max_length=255, blank=True, null=True)
    valor = models.CharField(max_length=255, blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_sistema"."empresa_param"'


class EmpresaResolucion(models.Model):
    id_empresa = models.ForeignKey(Empresa, models.DO_NOTHING, db_column='id_empresa')
    numero = models.CharField(max_length=50)
    fecha = models.DateField()
    tipo = models.CharField(max_length=20, blank=True, null=True)
    descripcion = models.TextField(blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_sistema"."empresa_resolucion"'


class EmpresaTelefono(models.Model):
    id_empresa = models.ForeignKey(Empresa, models.DO_NOTHING, db_column='id_empresa')
    numero = models.CharField(max_length=20)
    tipo = models.CharField(max_length=10)
    principal = models.BooleanField(blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_sistema"."empresa_telefono"'


class Grupo(models.Model):
    nombre = models.CharField(max_length=255, blank=True, null=True)
    asignable = models.IntegerField(blank=True, null=True)
    id_empresa = models.ForeignKey(Empresa, models.DO_NOTHING, db_column='id_empresa')

    class Meta:
        managed = False
        db_table = '"dm_sistema"."grupo"'


class Log(models.Model):
    id_operador = models.ForeignKey('Operador', models.DO_NOTHING, db_column='id_operador')
    id_empresa = models.ForeignKey(Empresa, models.DO_NOTHING, db_column='id_empresa')
    operacion = models.CharField(max_length=30)
    detalle = models.TextField()
    script = models.CharField(max_length=100)
    tabla = models.CharField(max_length=100)
    fecha = models.DateTimeField()
    id_cliente = models.IntegerField(blank=True, null=True)
    id_contrato = models.IntegerField(blank=True, null=True)
    id_suscriptor = models.IntegerField(blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_sistema"."log"'


class Menus(models.Model):
    url = models.CharField(max_length=50)
    texto = models.CharField(max_length=50, blank=True, null=True)
    etiqueta = models.CharField(max_length=50, blank=True, null=True)
    descripcion = models.CharField(max_length=255)
    nivel_menu = models.IntegerField(blank=True, null=True)
    orden = models.IntegerField(blank=True, null=True)
    modificable = models.CharField(max_length=2, blank=True, null=True)
    id_modulo = models.ForeignKey('Modulos', models.DO_NOTHING, db_column='id_modulo')
    separador_up = models.IntegerField(blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_sistema"."menus"'


class Modulos(models.Model):
    modulo = models.CharField(max_length=50)
    nombre = models.CharField(max_length=255)
    nombre_menu = models.CharField(max_length=100, blank=True, null=True)
    estado = models.SmallIntegerField(blank=True, null=True)
    icon = models.CharField(max_length=255, blank=True, null=True)
    orden = models.IntegerField(blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_sistema"."modulos"'


class Operador(models.Model):
    username = models.CharField(max_length=50)
    password = models.CharField(max_length=80, blank=True, null=True)
    clear = models.CharField(max_length=80, blank=True, null=True)
    rut = models.CharField(max_length=15, blank=True, null=True)
    nombres = models.CharField(max_length=100, blank=True, null=True)
    apellido_paterno = models.CharField(max_length=100, blank=True, null=True)
    apellido_materno = models.CharField(max_length=100, blank=True, null=True)
    modificable = models.IntegerField(blank=True, null=True)
    email = models.CharField(max_length=50, blank=True, null=True)
    estado = models.IntegerField(blank=True, null=True)
    acceso_web = models.IntegerField(blank=True, null=True)
    conexion_fallida = models.IntegerField(blank=True, null=True)
    operador_administrador = models.CharField(max_length=50, blank=True, null=True)
    id_grupo = models.ForeignKey(Grupo, models.DO_NOTHING, db_column='id_grupo')
    id_empresa = models.ForeignKey(Empresa, models.DO_NOTHING, db_column='id_empresa')
    superadmin = models.IntegerField(blank=True, null=True)
    fecha_creacion = models.DateTimeField(blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_sistema"."operador"'


class OperadorBodega(models.Model):
    id_operador = models.ForeignKey(Operador, models.DO_NOTHING, db_column='id_operador')
    id_bodega = models.IntegerField()
    id_empresa = models.ForeignKey(Empresa, models.DO_NOTHING, db_column='id_empresa')

    class Meta:
        managed = False
        db_table = '"dm_sistema"."operador_bodega"'


class OperadorEmpresaModulos(models.Model):
    id_operador = models.ForeignKey(Operador, models.DO_NOTHING, db_column='id_operador')
    id_empresa_modulo = models.ForeignKey(EmpresaModulo, models.DO_NOTHING, db_column='id_empresa_modulo')

    class Meta:
        managed = False
        db_table = '"dm_sistema"."operador_empresa_modulos"'


class OperadorEmpresaModulosMenu(models.Model):
    id_operador = models.ForeignKey(Operador, models.DO_NOTHING, db_column='id_operador')
    id_empresa_modulos_menu = models.ForeignKey(EmpresaModulosMenu, models.DO_NOTHING, db_column='id_empresa_modulos_menu')

    class Meta:
        managed = False
        db_table = '"dm_sistema"."operador_empresa_modulos_menu"'


class OperadorGrupos(models.Model):
    id_operador = models.ForeignKey(Operador, models.DO_NOTHING, db_column='id_operador')
    id_grupo = models.ForeignKey(Grupo, models.DO_NOTHING, db_column='id_grupo')

    class Meta:
        managed = False
        db_table = '"dm_sistema"."operador_grupos"'


class OperadorPuntoVenta(models.Model):
    id_operador = models.ForeignKey(Operador, models.DO_NOTHING, db_column='id_operador')
    id_punto_venta = models.IntegerField()
    id_empresa = models.ForeignKey(Empresa, models.DO_NOTHING, db_column='id_empresa')

    class Meta:
        managed = False
        db_table = '"dm_sistema"."operador_punto_venta"'


class Sesiones(models.Model):
    ip = models.CharField(max_length=20)
    fecha = models.DateTimeField()
    id_operador = models.ForeignKey(Operador, models.DO_NOTHING, db_column='id_operador')
    id_empresa = models.ForeignKey(Empresa, models.DO_NOTHING, db_column='id_empresa')

    class Meta:
        managed = False
        db_table = '"dm_sistema"."sesiones"'


class SesionesActivas(models.Model):
    id_empresa = models.ForeignKey(Empresa, models.DO_NOTHING, db_column='id_empresa')
    id_operador = models.ForeignKey(Operador, models.DO_NOTHING, db_column='id_operador')
    id_sesion = models.ForeignKey(Sesiones, models.DO_NOTHING, db_column='id_sesion')
    fecha_registro = models.DateTimeField(blank=True, null=True)
    token = models.CharField(max_length=255, blank=True, null=True)
    cod_verificacion = models.CharField(max_length=255, blank=True, null=True)

    class Meta:
        managed = False
        db_table = '"dm_sistema"."sesiones_activas"'


=== ./dm_sistema/tests.py ===
from django.test import TestCase

# Create your tests here.


=== ./dm_sistema/apps.py ===
from django.apps import AppConfig

class DmSistemaConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'dm_sistema'


=== ./combined.txt ===


=== ./db.sqlite3 ===
SQLite format 3   @     q   !           ;                                                 q .WJ                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       d!Bw4VP                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                0 %Atasks0001_initial2025-03-21 15:17:55.8928523 %Asessions0001_initial2025-03-21 12:20:32.061523H WAauth0012_alter_user_first_name_max_length2025-03-21 12:20:32.047144@ GAauth0011_update_proxy_permissions2025-03-21 12:20:32.032979C MAauth0010_alter_group_name_max_length2025-03-21 12:20:32.021626G UAauth0009_alter_user_last_name_max_length2025-03-21 12:20:32.006876F SAauth0008_alter_user_username_max_length2025-03-21 12:20:31.992576K ]Aauth0007_alter_validators_add_error_messages2025-03-21 12:20:31.976503A IAauth0006_require_contenttypes_00022025-03-21 12:20:31.964805B
 KAauth0005_alter_user_last_login_null2025-03-21 12:20:31.958763@	 GAauth0004_alter_user_username_opts2025-03-21 12:20:31.941603C MAauth0003_alter_user_email_max_length2025-03-21 12:20:31.926604H WAauth0002_alter_permission_name_max_length2025-03-21 12:20:31.910364H %GAcontenttypes0002_remove_content_type_name2025-03-21 12:20:31.894284I WAadmin0003_logentry_add_action_flag_choices2025-03-21 12:20:31.869946A GAadmin0002_logentry_remove_auto_add2025-03-21 12:20:31.8566780 %Aadmin0001_initial2025-03-21 12:20:31.833738/ %Aauth0001_initial2025-03-21 12:20:31.8139077 %%Acontenttypes0001_initial2025-03-21 12:20:31.787239 ``v                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          -django_admin_log+auth_permission	!auth_group
	auth_user   !tasks_task&3django_content_type                    /django_migrations
   | |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      taskstasksessionssession%#contenttypescontenttypeauthuserauthgroup!authpermission	adminlogentry    b:rN.T#`D"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    'view_taskCan view task  #+delete_taskCan delete task  #+change_taskCan change task %add_taskCan add task" %-view_sessionCan view session& )1delete_sessionCan delete session& )1change_sessionCan change session  #+add_sessionCan add session+ -7view_contenttypeCan view content type/ 1;delete_contenttypeCan delete content type/ 1;change_contenttypeCan change content type) +5add_contenttypeCan add content type 'view_userCan view user  #+delete_userCan delete user  #+change_userCan change user %add_userCan add user !)view_groupCan view group" %-delete_groupCan delete group"
 %-change_groupCan change group	 'add_groupCan add group( +3view_permissionCan view permission, /7delete_permissionCan delete permission, /7change_permissionCan change permission& )1add_permissionCan add permission$ 	'1view_logentryCan view log entry( 	+5delete_logentryCan delete log entry( 	+5change_logentryCan change log entry" 	%/add_logentryCan add log entry
    mWG4!n\G2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            view_task#delete_task#change_taskadd_task%view_session)delete_session)change_session#add_session-view_contenttype1delete_contenttype1change_contenttype+add_contenttypeview_user#delete_user#change_useradd_user!view_group%delete_group%change_group
add_group	+view_permission/delete_permission/change_permission)add_permission	'view_logentry	+delete_logentry	+change_logentry	%	add_logentry   G G                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             6 =A	=		Apbkdf2_sha256$870000$Y3fsG76r2PHHauJnWXkGW5$OECMM0PesNWwskOyEkAe5x5EtU4cLC03MnNkA6/wgZw=2025-03-21 15:04:12.868342adminignrvsmartgest@gmail.com2025-03-21 14:22:17.007757
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 	admin                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          #MUAgcgzg3m5m0eaqcn0g24lxodg8ypsf2a0.eJxVjMsOwiAQRf-FtSFMoTxcuvcbyDAMUjU0Ke3K-O_apAvd3nPOfYmI21rj1nmJUxZnAeL0uyWkB7cd5Du22yxpbusyJbkr8qBdXufMz8vh_h1U7PVbKwBjAwGoMqAzMCgmQyNTSp7JZu1YMSNaV5z3oK22Jejsw2iYC5N4fwDZ8Dg4:1tvduu:nXVL2yWhQdmlEj7d8UfYQc2ntPLxxD5sw2AKuwK-BOU2025-04-04 15:04:12.874553#MUAhs96bag6ik3x5asmj66hgxsyi68ahltg.eJxVjMsOwiAQRf-FtSFMoTxcuvcbyDAMUjU0Ke3K-O_apAvd3nPOfYmI21rj1nmJUxZnAeL0uyWkB7cd5Du22yxpbusyJbkr8qBdXufMz8vh_h1U7PVbKwBjAwGoMqAzMCgmQyNTSp7JZu1YMSNaV5z3oK22Jejsw2iYC5N4fwDZ8Dg4:1tvdGV:R0kiaVV54kigyib8HsUNe6jtRpqDBtBT7uS-_Z27CVo2025-04-04 14:22:27.230914
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               $Mgcgzg3m5m0eaqcn0g24lxodg8ypsf2a0#M	hs96bag6ik3x5asmj66hgxsyi68ahltg                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
   ] {uoic]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
						                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
 $	wWO  =                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   ?k-sindexauth_user_groups_user_id_group_id_94350c0c_uniqauth_user_groupsCREATE UNIQUE INDEX "auth_user_groups_user_id_group_id_94350c0c_uniq" ON "auth_user_groups" ("user_id", "group_id"):g9aindexauth_group_permissions_permission_id_84c5c92eauth_group_permissionsCREATE INDEX "auth_group_permissions_permission_id_84c5c92e" ON "auth_group_permissions" ("permission_id")+]9Mindexauth_group_permissions_group_id_b120cbf9auth_group_permissionsCREATE INDEX "auth_group_permissions_group_id_b120cbf9" ON "auth_group_permissions" ("group_id")0--tableauth_user_groupsauth_user_groupsCREATE TABLE "auth_user_groups" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "user_id" integer NOT NULL REFERENCES "auth_user" ("id") DEFERRABLE INITIALLY DEFERRED, "group_id" integer NOT NULL REFERENCES "auth_group" ("id") DEFERRABLE INITIALLY DEFERRED)&                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            N997tableauth_group_permissionsauth_group_permissions	CREATE TABLE "auth_group_permissions" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "group_id" integer NOT NULL REFERENCES "auth_group" ("id") DEFERRABLE INITIALLY DEFERRED, "permission_id" integer NOT NULL REFERENCES "auth_permission" ("id") DEFERRABLE INITIALLY DEFERRED)                                                                                                                                                                                                                O-1indexauth_user_groups_user_id_6a12ed8bauth_user_groupsCREATE INDEX "auth_user_groups_user_id_6a12ed8b" ON "auth_user_groups" ("user_id")j9#indexauth_group_permissions_group_id_permission_id_0cd325b0_uniqauth_group_permissionsCREATE UNIQUE INDEX "auth_group_permissions_group_id_permission_id_0cd325b0_uniq" ON "auth_group_permissions" ("group_id", "permission_id")XAA;tableauth_user_user_permissionsauth_user_user_permissionsCREATE TABLE "auth_user_user_permissions" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "user_id" integer NOT NULL REFERENCES "auth_user" ("id") DEFERRABLE INITIALLY DEFERRED, "permission_id" integer NOT NULL REFERENCES "auth_permission" ("id") DEFERRABLE INITIALLY DEFERRED)P++Ytablesqlite_sequencesqlite_sequenceCREATE TABLE sqlite_sequence(name,seq)Y//atabledjango_migrationsdjango_migrationsCREATE TABLE "django_migrations" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "app" varchar(255) NOT NULL, "name" varchar(255) NOT NULL, "applied" datetime NOT NULL)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  q jp

<	m7 q                                                                 C2!!Qtabletasks_tasktasks_task!CREATE TABLE "tasks_task" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "title" varchar(200) NOT NULL, "description" text NOT NULL, "completed" bool NOT NULL)1S)9indexdjango_session_expire_date_a5c62663django_session CREATE INDEX "django_session_expire_date_a5c62663" ON "django_session" ("expire_date")6/))'tabledjango_sessiondjango_session
CREATE TABLE "django_session" ("session_key" varchar(40) NOT NULL PRIMARY KEY, "session_data" text NOT NULL, "expire_date" datetime NOT NULL);0O) indexsqlite_autoindex_django_session_1django_session1.E indexsqlite_autoindex_auth_user_1auth_user+!!mtableauth_groupauth_groupCREATE TABLE "auth_group" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "name" varchar(150) NOT NULL UNIQUE)3,G! indexsqlite_autoindex_auth_group_1auth_group*-#tableauth_userauth_userCREATE TABLE "auth_user" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "password" varchar(128) NOT NULL, "last_login" datetime NULL, "is_superuser" bool NOT NULL, "username" varchar(150) NOT NULL UNIQUE, "last_name" varchar(150) NOT NULL, "email" varchar(254) NOT NULL, "is_staff" bool NOT NULL, "is_active" bool NOT NULL, "date_joined" datetime NOT NULL, "first_name" varchar(150) NOT NULL)$"]+Mindexauth_permission_content_type_id_2f476e4bauth_permissionCREATE INDEX "auth_permission_content_type_id_2f476e4b" ON "auth_permission" ("content_type_id")S!y+indexauth_permission_content_type_id_codename_01ab375a_uniqauth_permissionCREATE UNIQUE INDEX "auth_permission_content_type_id_codename_01ab375a_uniq" ON "auth_permission" ("content_type_id", "codename")% ++tableauth_permissionauth_permissionCREATE TABLE "auth_permission" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "content_type_id" integer NOT NULL REFERENCES "django_content_type" ("id") DEFERRABLE INITIALLY DEFERRED, "codename" varchar(100) NOT NULL, "name" varchar(255) NOT NULL)Ho3{indexdjango_content_type_app_label_model_76bd3d3b_uniqdjango_content_typeCREATE UNIQUE INDEX "django_content_type_app_label_model_76bd3d3b_uniq" ON "django_content_type" ("app_label", "model")I339tabledjango_content_typedjango_content_typeCREATE TABLE "django_content_type" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "app_label" varchar(100) NOT NULL, "model" varchar(100) NOT NULL)O-1indexdjango_admin_log_user_id_c564eba6django_admin_logCREATE INDEX "django_admin_log_user_id_c564eba6" ON "django_admin_log" ("user_id")(_-Qindexdjango_admin_log_content_type_id_c4bce8ebdjango_admin_logCREATE INDEX "django_admin_log_content_type_id_c4bce8eb" ON "django_admin_log" ("content_type_id")~--/tabledjango_admin_logdjango_admin_logCREATE TABLE "django_admin_log" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "object_id" text NULL, "object_repr" varchar(200) NOT NULL, "action_flag" smallint unsigned NOT NULL CHECK ("action_flag" >= 0), "change_message" text NOT NULL, "content_type_id" integer NULL REFERENCES "django_content_type" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" integer NOT NULL REFERENCES "auth_user" ("id") DEFERRABLE INITIALLY DEFERRED, "action_time" datetime NOT NULL)JoAqindexauth_user_user_permissions_permission_id_1fbb5f2cauth_user_user_permissionsCREATE INDEX "auth_user_user_permissions_permission_id_1fbb5f2c" ON "auth_user_user_permissions" ("permission_id")8cAYindexauth_user_user_permissions_user_id_a95ead1bauth_user_user_permissionsCREATE INDEX "auth_user_user_permissions_user_id_a95ead1b" ON "auth_user_user_permissions" ("user_id")w	A/indexauth_user_user_permissions_user_id_permission_id_14a6b632_uniqauth_user_user_permissionsCREATE UNIQUE INDEX "auth_user_user_permissions_user_id_permission_id_14a6b632_uniq" ON "auth_user_user_permissions" ("user_id", "permission_id")Q-5indexauth_user_groups_group_id_97559544auth_user_groupsCREATE INDEX "auth_user_groups_group_id_97559544" ON "auth_user_groups" ("group_id")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             	
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               			   { {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      taskstask sessionssession %#contenttypescontenttype authuser authgroup !authpermission adminlogentry                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          =	 	+	A2Prueba #2[{"added": {}}]2025-03-21 15:21:47.958467=	 	+	A1Prueba #1[{"added": {}}]2025-03-21 15:21:21.106694
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           A2025-04-04 15:04:12.874553A	2025-04-04 14:22:27.230914 j jwn                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               h                                                                                                          $                                 $                                 $                                 $                                 $                                H                               &    & 	Test #6Prueba #6# 	Prueba #5Test #5&" +1Tarea de pruebaesta es una prueba  	Prueba #3Test 3                  ! Prueba #4Test #4

=== ./proyectoDesarrollo/urls.py ===
# ./proyectoDesarrollo/urls.py
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),

    # ▸ Rutas de la nueva lógica bajo dm_sistema
    path('dm_sistema/', include('dm_sistema.urls')),
    

]


=== ./proyectoDesarrollo/__init__.py ===


=== ./proyectoDesarrollo/asgi.py ===
"""
ASGI config for proyectoDesarrollo project.

It exposes the ASGI callable as a module-level variable named ``application``.

For more information on this file, see
https://docs.djangoproject.com/en/5.1/howto/deployment/asgi/
"""

import os

from django.core.asgi import get_asgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'proyectoDesarrollo.settings')

application = get_asgi_application()


=== ./proyectoDesarrollo/wsgi.py ===
"""
WSGI config for proyectoDesarrollo project.

It exposes the WSGI callable as a module-level variable named ``application``.

For more information on this file, see
https://docs.djangoproject.com/en/5.1/howto/deployment/wsgi/
"""

import os

from django.core.wsgi import get_wsgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'proyectoDesarrollo.settings')

application = get_wsgi_application()


=== ./proyectoDesarrollo/settings.py ===
"""
Django settings for proyectoDesarrollo project.

Generated by 'django-admin startproject' using Django 5.1.7.

For more information on this file, see
https://docs.djangoproject.com/en/5.1/topics/settings/

For the full list of settings and their values, see
https://docs.djangoproject.com/en/5.1/ref/settings/
"""

from pathlib import Path
import os  # <-- ¡Importante agregar esta línea!

# Build paths inside the project like this: BASE_DIR / 'subdir'.
BASE_DIR = Path(__file__).resolve().parent.parent

# Quick-start development settings - unsuitable for production
# See https://docs.djangoproject.com/en/5.1/howto/deployment/checklist/

# SECURITY WARNING: keep the secret key used in production secret!
SECRET_KEY = 'django-insecure-5bluxl5na1#wnt1576=xcs&#55w!p6l4#_-m1sjyfku2fa00v='

# SECURITY WARNING: don't run with debug turned on in production!
DEBUG = False  # Ponlo False en producción

ALLOWED_HOSTS = [
    'localhost',
    '127.0.0.1',
    '35.222.2.211',
    'desarrollo.smartgest.cl'
        # Ajusta con tu IP o dominio
]

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Terceros
    'rest_framework',
    'corsheaders',  # <-- Asegúrate de tenerlo instalado y aquí
    # Tus apps
    #'coreempresas',
    #'configuracion',
    #'operadores',
    #'tasks',
    #'logs',
    'dm_logistica',
    'dm_sistema',
    'dm_requerimientos',
]

MIDDLEWARE = [
    'corsheaders.middleware.CorsMiddleware',  # <-- Importante que vaya antes de CommonMiddleware
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

ROOT_URLCONF = 'proyectoDesarrollo.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [BASE_DIR / 'templates'],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]

WSGI_APPLICATION = 'proyectoDesarrollo.wsgi.application'

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'mi_basedatos',      
        'USER': 'mi_usuario',        
        'PASSWORD': 'mi_password',   
        'HOST': 'localhost',         
        'PORT': '5432',              
    }
}

LANGUAGE_CODE = 'es-cl'
TIME_ZONE = 'America/Santiago'
USE_I18N = True
USE_L10N = True
USE_TZ = True

# Static files (CSS, JavaScript, Images)
STATIC_URL = '/static/'
STATIC_ROOT = os.path.join(BASE_DIR, 'static')
MEDIA_URL = '/media/'
MEDIA_ROOT = os.path.join(BASE_DIR, 'media')

# ============================================
# CORS CONFIGURATION PARA INCLUIR CREDENCIALES
# ============================================
CORS_ALLOW_CREDENTIALS = True
CORS_ALLOWED_ORIGINS = [
    'http://localhost:5173',      
    'http://35.222.2.211:8000',
    'http://0.0.0.0:5173',    
    'http://0.0.0.0:8000',    
]
CSRF_TRUSTED_ORIGINS = [
    'http://localhost:5173',
    'http://35.222.2.211:8000',
    'http://0.0.0.0:5173',
    'http://0.0.0.0:8000',
]

REST_FRAMEWORK = {
    'DEFAULT_AUTHENTICATION_CLASSES': (
        'rest_framework.authentication.SessionAuthentication',
        'rest_framework.authentication.BasicAuthentication',
        # etc...
    ),
    'DEFAULT_PERMISSION_CLASSES': (
        'rest_framework.permissions.AllowAny',
    ),
}

